<html>
    <head>
        <link rel="stylesheet" href="{{ url_for('static', filename='styles/home.css') }}">
        <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
        <meta http-equiv="refresh" content="10; URL=/contenido">
    </head>
    <body>
        <div class="presentation">
            <h1>Portal de Usuario</h1>
            
            <div class="box">
                {% if idd %}
                    <p><strong>Bienvenido:</strong> {{ idd[1] }}</p>
                    <p><strong>ID:</strong> {{ idd[0] }}</p>
                    <p><strong>Fecha de registro:</strong> {{ idd[2] }}</p>
                {% else %}
                    <p>Debe registrarse</p>
                {% endif %}
                <form action="/" method="get">
                <button type="submit" class="submit-btn">Salir</button>
                </form>
            </div>
             <br>
            <div class="box">
                <h4>Introduce tu url por favor...</h4>
                
                <form id="urlForm" method="post" action="/contenido"> 

                    <input type="text" name="urlinput" id="urlinput" placeholder="URL" class="url-Input" required="">
                    <br>
                    <button type="submit" id="checkUrlButton" class="submit-btn">Aceptar</button>
                </form>
            </div>
            <br>
        
        </div>

        <div class="contenido2">
            <!-- Caja 1: Datos del usuario -->
            <div class="box3">
                <h4>Urls en caché from Redis:</h4>
                <ul>
                {% for item in tracked_data %}
                    <li><a href="{{ item }}" target="_blank" style="color: inherit; text-decoration: none;">{{ item }}</a></li>
                {% endfor %}
                </ul>
                
            </div>
            
            <!-- Caja 2: Información urls -->
            <div class="box2">
                <h4>Urls PostgreSQL introducias por {{idd[1]}} :</h4>
                <form id="urlForm1" method="post" action="/ver"> 
                    <br>
                    <button type="submit" id="checkUrlButton1" class="submit-btn">Ver</button>
                </form>
                <ul>
                
                {% for item in tracked_urls_user %}
                    <li><a href="{{ item[1] }}" target="_blank" style="color: inherit; text-decoration: none;">{{ item[1] }}</a></li>
                {% endfor %}
                </ul>
                
            </div>
            <div class="box2">
                <h4>Top USER POSTS:</h4>
                <ul>
                {% for item in top_users[:10] %}
                    <li>
                        <span class="user-name">{{ item[0] }}</span>
                        <span class="user-posts">{{ item[1] }}</span>
                    </li>
                {% endfor %}
                </ul>
            </div>
            <div class="box2">
                <h4>Top URLS introducidas:</h4>
                <ul>
                {% for item in top_urlss[:10] %}
                    <li>
                        <span class="user-name">{{ item[0] }}</span>
                        <span class="user-posts">{{ item[1] }}</span>
                    </li>
                {% endfor %}
                </ul>
            </div>
            
        </div>
    </body>
</html>